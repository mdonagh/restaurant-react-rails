Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:22:56 -0700
  
ActiveRecord::NoDatabaseError (FATAL:  database "restaurant_development" does not exist
):
  
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:696:in `rescue in connect'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:691:in `connect'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:223:in `initialize'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:48:in `new'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:48:in `postgresql_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:811:in `new_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:855:in `checkout_new_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:834:in `try_to_checkout_new_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:795:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
web-console (3.7.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.7.0) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `catch'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/method_override.rb:22:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:22:59 -0700
  
ActiveRecord::NoDatabaseError (FATAL:  database "restaurant_development" does not exist
):
  
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:696:in `rescue in connect'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:691:in `connect'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:223:in `initialize'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:48:in `new'
activerecord (5.2.3) lib/active_record/connection_adapters/postgresql_adapter.rb:48:in `postgresql_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:811:in `new_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:855:in `checkout_new_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:834:in `try_to_checkout_new_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:795:in `acquire_connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:523:in `checkout'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:382:in `connection'
activerecord (5.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:1014:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:118:in `retrieve_connection'
activerecord (5.2.3) lib/active_record/connection_handling.rb:90:in `connection'
activerecord (5.2.3) lib/active_record/migration.rb:554:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
web-console (3.7.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.7.0) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `catch'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/method_override.rb:22:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
  [1m[35m (695.7ms)[0m  [1m[35mCREATE DATABASE "restaurant_development" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (431.1ms)[0m  [1m[35mCREATE DATABASE "restaurant_test" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (60.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (43.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to DeviseTokenAuthCreateUsers (20190708075101)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (50.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:4
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:47
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:48
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:49
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:50
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708075101"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateRestaurants (20190708150956)
  [1m[35m (39.6ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "description" character varying, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_user_id" ON "restaurants"  ("user_id")[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708150956"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateReviews (20190708151000)
  [1m[35m (40.5ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "rating" integer, "user_comment" text, "owner_reply" text, "user_id" integer, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_restaurant_id" ON "reviews"  ("restaurant_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708151000"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddRatingSummariesToRestaurants (20190711111256)
  [1m[35m (25.8ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "average_rating" decimal(2)[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "highest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "lowest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711111256"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddUserTypeToUser (20190711235649)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  â†³ db/migrate/20190711235649_add_user_type_to_user.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711235649"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (22.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-07-19 21:23:17.921600"], ["updated_at", "2019-07-19 21:23:17.921600"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:23:31 -0700
  [1m[35m (1.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 401 Unauthorized in 107ms (Views: 0.4ms | ActiveRecord: 5.1ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:23:32 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 401 Unauthorized in 4ms (Views: 0.2ms | ActiveRecord: 0.6ms)


Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:23:37 -0700
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0, "registration"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameter: :registration
Unpermitted parameter: :registration
Unpermitted parameter: :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "mark@mark.com"], ["provider", "email"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Create (3.7ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["uid", "mark@mark.com"], ["encrypted_password", "$2a$11$MRyxWP0jHYzEI5pkxNetA.DU0KbEsf2D7MD9FCd2JGUAtUfDa7zI6"], ["confirmed_at", "2019-07-19 21:23:37.539389"], ["email", "mark@mark.com"], ["tokens", "{}"], ["created_at", "2019-07-19 21:23:37.539112"], ["updated_at", "2019-07-19 21:23:37.539112"], ["role", 0]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (40.9ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"xGVMkdl4Rgfo6mXzh0y34g\":{\"token\":\"$2a$12$0Ss0n0DiNVu5YEznKAApg.t3xmk9Jmu.HJI6E3uVWXLTVbVQgvWv.\",\"expiry\":1564781017}}"], ["updated_at", "2019-07-19 21:23:37.852160"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (41.3ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"xGVMkdl4Rgfo6mXzh0y34g\":{\"token\":\"$2a$12$pcdf2ZkghhGDMEtLWxo88ewIjTKxBuJXyRvtM//5XDEGHb8vcd7BK\",\"expiry\":1564781017,\"last_token\":\"$2a$12$0Ss0n0DiNVu5YEznKAApg.t3xmk9Jmu.HJI6E3uVWXLTVbVQgvWv.\",\"updated_at\":\"2019-07-19T21:23:37.948Z\"}}"], ["updated_at", "2019-07-19 21:23:38.244773"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (40.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 1015ms (Views: 1.5ms | ActiveRecord: 129.8ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:23:38 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"xGVMkdl4Rgfo6mXzh0y34g\":{\"token\":\"$2a$12$pcdf2ZkghhGDMEtLWxo88ewIjTKxBuJXyRvtM//5XDEGHb8vcd7BK\",\"expiry\":1564781017,\"last_token\":\"$2a$12$0Ss0n0DiNVu5YEznKAApg.t3xmk9Jmu.HJI6E3uVWXLTVbVQgvWv.\",\"updated_at\":\"2019-07-19T21:23:37.948Z\"},\"7jkv8vcqrAU5ldKK91gdew\":{\"token\":\"$2a$12$MKsH1XXP23DWYepR4RWUYOEJOo5l70kqBH1xScQhHy.F2TVA5TK6e\",\"expiry\":1564781018}}"], ["updated_at", "2019-07-19 21:23:38.764563"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 487ms (ActiveRecord: 3.4ms)


  
NoMethodError (undefined method `current_sign_in_ip' for #<User:0x00007ff70b1b5d00>
Did you mean?  current_sign_in_at
               current_sign_in_at=
               current_sign_in_at?):
  
activemodel (5.2.3) lib/active_model/attribute_methods.rb:430:in `method_missing'
devise (4.5.0) lib/devise/models/trackable.rb:25:in `update_tracked_fields'
devise (4.5.0) lib/devise/models/trackable.rb:39:in `update_tracked_fields!'
devise (4.5.0) lib/devise/hooks/trackable.rb:9:in `block in <main>'
warden (1.2.8) lib/warden/hooks.rb:15:in `block in _run_callbacks'
warden (1.2.8) lib/warden/hooks.rb:10:in `each'
warden (1.2.8) lib/warden/hooks.rb:10:in `_run_callbacks'
warden (1.2.8) lib/warden/manager.rb:52:in `_run_callbacks'
warden (1.2.8) lib/warden/proxy.rb:191:in `set_user'
devise (4.5.0) lib/devise/controllers/sign_in_out.rb:53:in `sign_in'
devise_token_auth (1.0.0) app/controllers/devise_token_auth/sessions_controller.rb:32:in `create'
actionpack (5.2.3) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (5.2.3) lib/abstract_controller/base.rb:194:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (5.2.3) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (5.2.3) lib/active_support/callbacks.rb:132:in `run_callbacks'
actionpack (5.2.3) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (5.2.3) lib/active_support/notifications.rb:168:in `block in instrument'
activesupport (5.2.3) lib/active_support/notifications/instrumenter.rb:23:in `instrument'
activesupport (5.2.3) lib/active_support/notifications.rb:168:in `instrument'
actionpack (5.2.3) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
activerecord (5.2.3) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.3) lib/abstract_controller/base.rb:134:in `process'
actionview (5.2.3) lib/action_view/rendering.rb:32:in `process'
actionpack (5.2.3) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.3) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (5.2.3) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:840:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware/token_dispatcher.rb:20:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware/revocation_manager.rb:20:in `call'
rack (2.0.7) lib/rack/builder.rb:153:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware.rb:23:in `call'
warden (1.2.8) lib/warden/manager.rb:36:in `block in call'
warden (1.2.8) lib/warden/manager.rb:34:in `catch'
warden (1.2.8) lib/warden/manager.rb:34:in `call'
rack (2.0.7) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.0.7) lib/rack/etag.rb:25:in `call'
rack (2.0.7) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.7) lib/rack/head.rb:12:in `call'
actionpack (5.2.3) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.0.7) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.7) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/cookies.rb:670:in `call'
activerecord (5.2.3) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
web-console (3.7.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.7.0) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `catch'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/method_override.rb:22:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (54.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (217.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_development"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (215.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_test"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (438.5ms)[0m  [1m[35mCREATE DATABASE "restaurant_development" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (432.3ms)[0m  [1m[35mCREATE DATABASE "restaurant_test" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to DeviseTokenAuthCreateUsers (20190708075101)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (23.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:4
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:48
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:49
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:50
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:51
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708075101"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateRestaurants (20190708150956)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "description" character varying, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_user_id" ON "restaurants"  ("user_id")[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708150956"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateReviews (20190708151000)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "rating" integer, "user_comment" text, "owner_reply" text, "user_id" integer, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_restaurant_id" ON "reviews"  ("restaurant_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708151000"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddRatingSummariesToRestaurants (20190711111256)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "average_rating" decimal(2)[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "highest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:4
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "lowest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711111256"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddUserTypeToUser (20190711235649)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  â†³ db/migrate/20190711235649_add_user_type_to_user.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711235649"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-07-19 21:24:57.540509"], ["updated_at", "2019-07-19 21:24:57.540509"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (23.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (228.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_development"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (213.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_test"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (438.1ms)[0m  [1m[35mCREATE DATABASE "restaurant_development" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (465.3ms)[0m  [1m[35mCREATE DATABASE "restaurant_test" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to DeviseTokenAuthCreateUsers (20190708075101)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (46.1ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:4
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:48
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:49
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:50
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:51
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708075101"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateRestaurants (20190708150956)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "description" character varying, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_user_id" ON "restaurants"  ("user_id")[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708150956"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateReviews (20190708151000)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "rating" integer, "user_comment" text, "owner_reply" text, "user_id" integer, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_restaurant_id" ON "reviews"  ("restaurant_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708151000"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddRatingSummariesToRestaurants (20190711111256)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "average_rating" decimal(2)[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:3
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "highest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:4
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "lowest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711111256"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddUserTypeToUser (20190711235649)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  â†³ db/migrate/20190711235649_add_user_type_to_user.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711235649"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-07-19 21:25:10.649810"], ["updated_at", "2019-07-19 21:25:10.649810"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:25:20 -0700
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0, "registration"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameter: :registration
Unpermitted parameter: :registration
Unpermitted parameter: :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Exists (1.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "mark@mark.com"], ["provider", "email"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Create (1.2ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["uid", "mark@mark.com"], ["encrypted_password", "$2a$11$JSmLbpD/QklyRa7duBooKuwxmyJyvhTGfKICw/iFU.Rshswttg6pO"], ["confirmed_at", "2019-07-19 21:25:20.513969"], ["email", "mark@mark.com"], ["tokens", "{}"], ["created_at", "2019-07-19 21:25:20.513852"], ["updated_at", "2019-07-19 21:25:20.513852"], ["role", 0]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"rlAjAC68dpg4m-oadE8tsA\":{\"token\":\"$2a$12$a6Z.31rL4b3nyztNyK3iEOxxIkBZzpAR6u7GCJIBbgEdA1ftp3PiK\",\"expiry\":1564781120}}"], ["updated_at", "2019-07-19 21:25:20.821772"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.6ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"rlAjAC68dpg4m-oadE8tsA\":{\"token\":\"$2a$12$ywBc7/fnME7uV4KvqXrNcOCdaZvssSm8./vRinmZilSyW80kuaMIm\",\"expiry\":1564781120,\"last_token\":\"$2a$12$a6Z.31rL4b3nyztNyK3iEOxxIkBZzpAR6u7GCJIBbgEdA1ftp3PiK\",\"updated_at\":\"2019-07-19T21:25:20.839Z\"}}"], ["updated_at", "2019-07-19 21:25:21.146316"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 876ms (Views: 2.0ms | ActiveRecord: 13.1ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:25:21 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"rlAjAC68dpg4m-oadE8tsA\":{\"token\":\"$2a$12$ywBc7/fnME7uV4KvqXrNcOCdaZvssSm8./vRinmZilSyW80kuaMIm\",\"expiry\":1564781120,\"last_token\":\"$2a$12$a6Z.31rL4b3nyztNyK3iEOxxIkBZzpAR6u7GCJIBbgEdA1ftp3PiK\",\"updated_at\":\"2019-07-19T21:25:20.839Z\"},\"Fjgite3R5L4XSyDoVrYOdw\":{\"token\":\"$2a$12$.45SrHOQmXAnhH9tBEGndu.5ECd208X8PTKLS2rTrkZdQLzR0mW/C\",\"expiry\":1564781121}}"], ["updated_at", "2019-07-19 21:25:21.643331"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 490ms (ActiveRecord: 2.1ms)


  
NoMethodError (undefined method `last_sign_in_ip=' for #<User:0x00007fdae27610c8>
Did you mean?  last_sign_in_at=
               last_sign_in_at
               last_sign_in_at?):
  
activemodel (5.2.3) lib/active_model/attribute_methods.rb:430:in `method_missing'
devise (4.5.0) lib/devise/models/trackable.rb:26:in `update_tracked_fields'
devise (4.5.0) lib/devise/models/trackable.rb:39:in `update_tracked_fields!'
devise (4.5.0) lib/devise/hooks/trackable.rb:9:in `block in <main>'
warden (1.2.8) lib/warden/hooks.rb:15:in `block in _run_callbacks'
warden (1.2.8) lib/warden/hooks.rb:10:in `each'
warden (1.2.8) lib/warden/hooks.rb:10:in `_run_callbacks'
warden (1.2.8) lib/warden/manager.rb:52:in `_run_callbacks'
warden (1.2.8) lib/warden/proxy.rb:191:in `set_user'
devise (4.5.0) lib/devise/controllers/sign_in_out.rb:53:in `sign_in'
devise_token_auth (1.0.0) app/controllers/devise_token_auth/sessions_controller.rb:32:in `create'
actionpack (5.2.3) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (5.2.3) lib/abstract_controller/base.rb:194:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (5.2.3) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (5.2.3) lib/active_support/callbacks.rb:132:in `run_callbacks'
actionpack (5.2.3) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (5.2.3) lib/active_support/notifications.rb:168:in `block in instrument'
activesupport (5.2.3) lib/active_support/notifications/instrumenter.rb:23:in `instrument'
activesupport (5.2.3) lib/active_support/notifications.rb:168:in `instrument'
actionpack (5.2.3) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
activerecord (5.2.3) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.3) lib/abstract_controller/base.rb:134:in `process'
actionview (5.2.3) lib/action_view/rendering.rb:32:in `process'
actionpack (5.2.3) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.3) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (5.2.3) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:840:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware/token_dispatcher.rb:20:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware/revocation_manager.rb:20:in `call'
rack (2.0.7) lib/rack/builder.rb:153:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware.rb:23:in `call'
warden (1.2.8) lib/warden/manager.rb:36:in `block in call'
warden (1.2.8) lib/warden/manager.rb:34:in `catch'
warden (1.2.8) lib/warden/manager.rb:34:in `call'
rack (2.0.7) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.0.7) lib/rack/etag.rb:25:in `call'
rack (2.0.7) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.7) lib/rack/head.rb:12:in `call'
actionpack (5.2.3) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.0.7) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.7) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/cookies.rb:670:in `call'
activerecord (5.2.3) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
web-console (3.7.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.7.0) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `catch'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/method_override.rb:22:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (218.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_development"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (212.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_test"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (426.9ms)[0m  [1m[35mCREATE DATABASE "restaurant_development" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (436.9ms)[0m  [1m[35mCREATE DATABASE "restaurant_test" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (8.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (2.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to DeviseTokenAuthCreateUsers (20190708075101)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (46.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:4
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:49
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:50
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:51
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:52
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708075101"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateRestaurants (20190708150956)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "description" character varying, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[35m (1.1ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_user_id" ON "restaurants"  ("user_id")[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708150956"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateReviews (20190708151000)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (4.9ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "rating" integer, "user_comment" text, "owner_reply" text, "user_id" integer, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_restaurant_id" ON "reviews"  ("restaurant_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708151000"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddRatingSummariesToRestaurants (20190711111256)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "average_rating" decimal(2)[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:3
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "highest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:4
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "lowest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711111256"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddUserTypeToUser (20190711235649)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  â†³ db/migrate/20190711235649_add_user_type_to_user.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711235649"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-07-19 21:25:49.389814"], ["updated_at", "2019-07-19 21:25:49.389814"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:26:01 -0700
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0, "registration"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameter: :registration
Unpermitted parameter: :registration
Unpermitted parameter: :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Exists (2.2ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "mark@mark.com"], ["provider", "email"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Create (2.1ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["uid", "mark@mark.com"], ["encrypted_password", "$2a$11$RbugLDAK0QL2fuRSDJba9OlVA7GvvLdq7FUrXgHg1gyxbhUDKo4Eq"], ["confirmed_at", "2019-07-19 21:26:02.247395"], ["email", "mark@mark.com"], ["tokens", "{}"], ["created_at", "2019-07-19 21:26:02.247062"], ["updated_at", "2019-07-19 21:26:02.247062"], ["role", 0]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"pn7-magwYWZU0SFm1MuoDw\":{\"token\":\"$2a$12$P1vdTMqk7hZCedagq0Na8O8dp4J6ZGoVKPLHsTODyl98K2Fgb4Pjq\",\"expiry\":1564781162}}"], ["updated_at", "2019-07-19 21:26:02.561596"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.5ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"pn7-magwYWZU0SFm1MuoDw\":{\"token\":\"$2a$12$..vejcKmdnYba8XKvU0TRub1zgjubrYh7vg23xv6EvWR3J15LLHNG\",\"expiry\":1564781162,\"last_token\":\"$2a$12$P1vdTMqk7hZCedagq0Na8O8dp4J6ZGoVKPLHsTODyl98K2Fgb4Pjq\",\"updated_at\":\"2019-07-19T21:26:02.570Z\"}}"], ["updated_at", "2019-07-19 21:26:02.864052"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 888ms (Views: 0.5ms | ActiveRecord: 17.1ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:26:02 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"pn7-magwYWZU0SFm1MuoDw\":{\"token\":\"$2a$12$..vejcKmdnYba8XKvU0TRub1zgjubrYh7vg23xv6EvWR3J15LLHNG\",\"expiry\":1564781162,\"last_token\":\"$2a$12$P1vdTMqk7hZCedagq0Na8O8dp4J6ZGoVKPLHsTODyl98K2Fgb4Pjq\",\"updated_at\":\"2019-07-19T21:26:02.570Z\"},\"D6fuiuvszDff9yVrNwGqDQ\":{\"token\":\"$2a$12$g6LHarTivdF8we1U.j1Z/e85JC35QA0Iz1ood.F0GnbnSXakIXTVu\",\"expiry\":1564781163}}"], ["updated_at", "2019-07-19 21:26:03.365474"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 500 Internal Server Error in 505ms (ActiveRecord: 2.1ms)


  
NoMethodError (undefined method `sign_in_count' for #<User:0x00007fb641e2bb58>):
  
activemodel (5.2.3) lib/active_model/attribute_methods.rb:430:in `method_missing'
devise (4.5.0) lib/devise/models/trackable.rb:29:in `update_tracked_fields'
devise (4.5.0) lib/devise/models/trackable.rb:39:in `update_tracked_fields!'
devise (4.5.0) lib/devise/hooks/trackable.rb:9:in `block in <main>'
warden (1.2.8) lib/warden/hooks.rb:15:in `block in _run_callbacks'
warden (1.2.8) lib/warden/hooks.rb:10:in `each'
warden (1.2.8) lib/warden/hooks.rb:10:in `_run_callbacks'
warden (1.2.8) lib/warden/manager.rb:52:in `_run_callbacks'
warden (1.2.8) lib/warden/proxy.rb:191:in `set_user'
devise (4.5.0) lib/devise/controllers/sign_in_out.rb:53:in `sign_in'
devise_token_auth (1.0.0) app/controllers/devise_token_auth/sessions_controller.rb:32:in `create'
actionpack (5.2.3) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (5.2.3) lib/abstract_controller/base.rb:194:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (5.2.3) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (5.2.3) lib/active_support/callbacks.rb:132:in `run_callbacks'
actionpack (5.2.3) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/instrumentation.rb:34:in `block in process_action'
activesupport (5.2.3) lib/active_support/notifications.rb:168:in `block in instrument'
activesupport (5.2.3) lib/active_support/notifications/instrumenter.rb:23:in `instrument'
activesupport (5.2.3) lib/active_support/notifications.rb:168:in `instrument'
actionpack (5.2.3) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (5.2.3) lib/action_controller/metal/params_wrapper.rb:256:in `process_action'
activerecord (5.2.3) lib/active_record/railties/controller_runtime.rb:24:in `process_action'
actionpack (5.2.3) lib/abstract_controller/base.rb:134:in `process'
actionview (5.2.3) lib/action_view/rendering.rb:32:in `process'
actionpack (5.2.3) lib/action_controller/metal.rb:191:in `dispatch'
actionpack (5.2.3) lib/action_controller/metal.rb:252:in `dispatch'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:52:in `dispatch'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:34:in `serve'
actionpack (5.2.3) lib/action_dispatch/routing/mapper.rb:18:in `block in <class:Constraints>'
actionpack (5.2.3) lib/action_dispatch/routing/mapper.rb:48:in `serve'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:52:in `block in serve'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:35:in `each'
actionpack (5.2.3) lib/action_dispatch/journey/router.rb:35:in `serve'
actionpack (5.2.3) lib/action_dispatch/routing/route_set.rb:840:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware/token_dispatcher.rb:20:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware/revocation_manager.rb:20:in `call'
rack (2.0.7) lib/rack/builder.rb:153:in `call'
warden-jwt_auth (0.1.4) lib/warden/jwt_auth/middleware.rb:23:in `call'
warden (1.2.8) lib/warden/manager.rb:36:in `block in call'
warden (1.2.8) lib/warden/manager.rb:34:in `catch'
warden (1.2.8) lib/warden/manager.rb:34:in `call'
rack (2.0.7) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.0.7) lib/rack/etag.rb:25:in `call'
rack (2.0.7) lib/rack/conditional_get.rb:38:in `call'
rack (2.0.7) lib/rack/head.rb:12:in `call'
actionpack (5.2.3) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.0.7) lib/rack/session/abstract/id.rb:232:in `context'
rack (2.0.7) lib/rack/session/abstract/id.rb:226:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/cookies.rb:670:in `call'
activerecord (5.2.3) lib/active_record/migration.rb:559:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (5.2.3) lib/active_support/callbacks.rb:98:in `run_callbacks'
actionpack (5.2.3) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:61:in `call'
web-console (3.7.0) lib/web_console/middleware.rb:135:in `call_app'
web-console (3.7.0) lib/web_console/middleware.rb:30:in `block in call'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `catch'
web-console (3.7.0) lib/web_console/middleware.rb:20:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (5.2.3) lib/rails/rack/logger.rb:38:in `call_app'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `block in tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (5.2.3) lib/active_support/tagged_logging.rb:71:in `tagged'
railties (5.2.3) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.0.7) lib/rack/method_override.rb:22:in `call'
rack (2.0.7) lib/rack/runtime.rb:22:in `call'
activesupport (5.2.3) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (5.2.3) lib/action_dispatch/middleware/static.rb:127:in `call'
rack (2.0.7) lib/rack/sendfile.rb:111:in `call'
rack-cors (1.0.3) lib/rack/cors.rb:95:in `call'
railties (5.2.3) lib/rails/engine.rb:524:in `call'
puma (3.12.1) lib/puma/configuration.rb:227:in `call'
puma (3.12.1) lib/puma/server.rb:660:in `handle_request'
puma (3.12.1) lib/puma/server.rb:474:in `process_client'
puma (3.12.1) lib/puma/server.rb:334:in `block in run'
puma (3.12.1) lib/puma/thread_pool.rb:135:in `block in spawn_thread'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (56.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (219.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_development"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (213.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "restaurant_test"[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (437.3ms)[0m  [1m[35mCREATE DATABASE "restaurant_development" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (441.9ms)[0m  [1m[35mCREATE DATABASE "restaurant_test" ENCODING = 'unicode'[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (5.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (3.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to DeviseTokenAuthCreateUsers (20190708075101)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (42.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "provider" character varying DEFAULT 'email' NOT NULL, "uid" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "allow_password_change" boolean DEFAULT FALSE, "remember_created_at" timestamp, "confirmation_token" character varying, "confirmed_at" timestamp, "confirmation_sent_at" timestamp, "unconfirmed_email" character varying, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" character varying, "last_sign_in_ip" character varying, "sign_in_count" integer, "name" character varying, "nickname" character varying, "image" character varying, "email" character varying, "tokens" json, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:4
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:50
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_uid_and_provider" ON "users"  ("uid", "provider")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:51
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:52
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_confirmation_token" ON "users"  ("confirmation_token")[0m
  â†³ db/migrate/20190708075101_devise_token_auth_create_users.rb:53
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708075101"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateRestaurants (20190708150956)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (3.5ms)[0m  [1m[35mCREATE TABLE "restaurants" ("id" bigserial primary key, "name" character varying, "address" character varying, "description" character varying, "user_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[35m (1.2ms)[0m  [1m[35mCREATE  INDEX  "index_restaurants_on_user_id" ON "restaurants"  ("user_id")[0m
  â†³ db/migrate/20190708150956_create_restaurants.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708150956"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to CreateReviews (20190708151000)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "reviews" ("id" bigserial primary key, "rating" integer, "user_comment" text, "owner_reply" text, "user_id" integer, "restaurant_id" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_user_id" ON "reviews"  ("user_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[35m (1.0ms)[0m  [1m[35mCREATE  INDEX  "index_reviews_on_restaurant_id" ON "reviews"  ("restaurant_id")[0m
  â†³ db/migrate/20190708151000_create_reviews.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190708151000"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddRatingSummariesToRestaurants (20190711111256)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.9ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "average_rating" decimal(2)[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:3
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "highest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:4
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "restaurants" ADD "lowest_rating" integer[0m
  â†³ db/migrate/20190711111256_add_rating_summaries_to_restaurants.rb:5
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711111256"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Migrating to AddUserTypeToUser (20190711235649)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "role" integer[0m
  â†³ db/migrate/20190711235649_add_user_type_to_user.rb:3
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20190711235649"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Load (0.4ms)[0m  [1m[34mSELECT  "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2019-07-19 21:26:35.658330"], ["updated_at", "2019-07-19 21:26:35.658330"]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(5018747401584347760)[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/bin/rake:23
Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:26:43 -0700
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0, "registration"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameter: :registration
Unpermitted parameter: :registration
Unpermitted parameter: :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Exists (2.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "mark@mark.com"], ["provider", "email"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Create (2.6ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at", "role") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["uid", "mark@mark.com"], ["encrypted_password", "$2a$11$o40nJFS/7H4IFv3onEg8Cew7XEs.cptgWzKBDVoSd2oCx.ghJF6dC"], ["confirmed_at", "2019-07-19 21:26:43.805238"], ["email", "mark@mark.com"], ["tokens", "{}"], ["created_at", "2019-07-19 21:26:43.804835"], ["updated_at", "2019-07-19 21:26:43.804835"], ["role", 0]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"expiry\":1564781203}}"], ["updated_at", "2019-07-19 21:26:44.116644"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.5ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"}}"], ["updated_at", "2019-07-19 21:26:44.436454"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 894ms (Views: 0.4ms | ActiveRecord: 14.2ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:26:44 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"expiry\":1564781204}}"], ["updated_at", "2019-07-19 21:26:44.942957"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "current_sign_in_ip" = $3, "last_sign_in_ip" = $4, "sign_in_count" = $5, "updated_at" = $6 WHERE "users"."id" = $7[0m  [["current_sign_in_at", "2019-07-19 21:26:44.950054"], ["last_sign_in_at", "2019-07-19 21:26:44.950054"], ["current_sign_in_ip", "127.0.0.1"], ["last_sign_in_ip", "127.0.0.1"], ["sign_in_count", 1], ["updated_at", "2019-07-19 21:26:44.951758"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.5ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"}}"], ["updated_at", "2019-07-19 21:26:45.264557"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 774ms (Views: 0.3ms | ActiveRecord: 6.8ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 14:26:45 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (1.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 23ms (Views: 1.1ms | ActiveRecord: 4.2ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 14:28:44 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.9ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.9ms)


Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:30:00 -0700
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0, "registration"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameter: :registration
Unpermitted parameter: :registration
Unpermitted parameter: :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Exists (1.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "mark@mark.com"], ["provider", "email"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 422 Unprocessable Entity in 250ms (Views: 0.5ms | ActiveRecord: 6.1ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 14:30:02 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"expiry\":1564781402}}"], ["updated_at", "2019-07-19 21:30:03.172493"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "sign_in_count" = $2, "updated_at" = $3 WHERE "users"."id" = $4[0m  [["current_sign_in_at", "2019-07-19 21:30:03.178834"], ["sign_in_count", 2], ["updated_at", "2019-07-19 21:30:03.180315"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.5ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"}}"], ["updated_at", "2019-07-19 21:30:03.502495"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 864ms (Views: 0.3ms | ActiveRecord: 10.1ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 14:30:03 -0700
Processing by RestaurantsController#index as HTML
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)


  
NoMethodError (undefined method `by_rating' for Restaurant:Module):
  
app/controllers/restaurants_controller.rb:3:in `index'
Started POST "/auth" for 127.0.0.1 at 2019-07-19 14:32:51 -0700
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::RegistrationsController#create as HTML
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0, "registration"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]", "role"=>0}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameter: :registration
Unpermitted parameter: :registration
Unpermitted parameter: :registration
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Exists (1.3ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "mark@mark.com"], ["provider", "email"], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 422 Unprocessable Entity in 250ms (Views: 0.9ms | ActiveRecord: 5.1ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 22:45:03 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (5.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (1.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"expiry\":1564811104}}"], ["updated_at", "2019-07-20 05:45:04.756916"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2019-07-20 05:45:04.771978"], ["last_sign_in_at", "2019-07-19 21:30:03.178834"], ["sign_in_count", 3], ["updated_at", "2019-07-20 05:45:04.774734"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (4.1ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"}}"], ["updated_at", "2019-07-20 05:45:05.152350"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 938ms (Views: 2.0ms | ActiveRecord: 19.7ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 22:45:05 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (2.3ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 45ms (Views: 3.1ms | ActiveRecord: 15.0ms)


  [1m[35m (2.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (42.9ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "alecconsidine@ohara.biz"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (41.7ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "alecconsidine@ohara.biz"], ["encrypted_password", "$2a$11$2jsVy5D3Q2Csz7ETtrXmlukWLVJpmrD/ImKRKN1QBEeM4ye4xMycO"], ["confirmed_at", "2019-07-20 06:04:24.755590"], ["email", "alecconsidine@ohara.biz"], ["tokens", "{}"], ["created_at", "2019-07-20 06:04:24.755363"], ["updated_at", "2019-07-20 06:04:24.755363"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "brandon@aufderhar.name"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "brandon@aufderhar.name"], ["encrypted_password", "$2a$11$MysjDufjTE38ifaoTkFSH.ZyNkN7um2ClO1CbUHbioMWY0uiFKz5m"], ["confirmed_at", "2019-07-20 06:04:33.900758"], ["email", "brandon@aufderhar.name"], ["tokens", "{}"], ["created_at", "2019-07-20 06:04:33.900693"], ["updated_at", "2019-07-20 06:04:33.900693"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (2.1ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "stacia@raynor.io"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "stacia@raynor.io"], ["encrypted_password", "$2a$11$F9IGbEWLFAtWXXngc/2.J.ZbaJyB1lSQCwpzdfziuTteKB15RDAmG"], ["confirmed_at", "2019-07-20 06:05:22.620096"], ["email", "stacia@raynor.io"], ["tokens", "{}"], ["created_at", "2019-07-20 06:05:22.619928"], ["updated_at", "2019-07-20 06:05:22.619928"]]
  [1m[35m (39.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (5.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "margartsipes@heaneymclaughlin.co"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (16.3ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "margartsipes@heaneymclaughlin.co"], ["encrypted_password", "$2a$11$wVggBYM9TFvp5vo9lDIKR.rqg0yaiiDt.JmWIPkHeY/JAShBeBb.2"], ["confirmed_at", "2019-07-20 06:06:06.477135"], ["email", "margartsipes@heaneymclaughlin.co"], ["tokens", "{}"], ["created_at", "2019-07-20 06:06:06.476897"], ["updated_at", "2019-07-20 06:06:06.476897"]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (9.0ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Create (63.6ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "address", "description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Telma Boehm"], ["address", "Apt. 417 8075 Noe Crest, Hansenmouth, LA 19271-7688"], ["description", "vibrant, watery, cacao nibs, bergamot, nutella"], ["user_id", 5], ["created_at", "2019-07-20 06:06:06.555415"], ["updated_at", "2019-07-20 06:06:06.555415"]]
  [1m[35m (3.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "germainetoy@glover.net"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "germainetoy@glover.net"], ["encrypted_password", "$2a$11$oKghOkmYrUYOUvbx5xXLQeXiKK1AANCVl8/4h40AT418.idxSYKGS"], ["confirmed_at", "2019-07-20 06:21:50.523153"], ["email", "germainetoy@glover.net"], ["tokens", "{}"], ["created_at", "2019-07-20 06:21:50.522972"], ["updated_at", "2019-07-20 06:21:50.522972"]]
  [1m[35m (40.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "address", "description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Joanne Nikolaus"], ["address", "Suite 188 6679 Wilderman Track, Troyborough, IN 87151-1550"], ["description", "rounded, slick, wheat, peach, passion fruit"], ["user_id", 6], ["created_at", "2019-07-20 06:21:50.574359"], ["updated_at", "2019-07-20 06:21:50.574359"]]
  [1m[35m (40.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (1.4ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "evelynnreynolds@cremin.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "evelynnreynolds@cremin.com"], ["encrypted_password", "$2a$11$AOctoYQZsSlw2qmchrCNpO0hZlgujLCFAM6B.Rnaj4hKddEclEdve"], ["confirmed_at", "2019-07-20 06:22:44.424996"], ["email", "evelynnreynolds@cremin.com"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:44.424655"], ["updated_at", "2019-07-20 06:22:44.424655"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Create (0.7ms)[0m  [1m[32mINSERT INTO "restaurants" ("name", "address", "description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Grant Fritsch"], ["address", "Apt. 610 4233 Gottlieb Square, Port Wiley, OK 17769-8916"], ["description", "juicy, coating, cashew, passion fruit, clove"], ["user_id", 7], ["created_at", "2019-07-20 06:22:44.434590"], ["updated_at", "2019-07-20 06:22:44.434590"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.7ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "adamlemke@farrell.name"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "adamlemke@farrell.name"], ["encrypted_password", "$2a$11$b5tul1ArvexybMU82CyRoefWs/6NT3uGJB0ozqVUhPvlcV3T2DHtW"], ["confirmed_at", "2019-07-20 06:22:44.615065"], ["email", "adamlemke@farrell.name"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:44.614967"], ["updated_at", "2019-07-20 06:22:44.614967"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (42.7ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 4], ["user_comment", "Try to synthesize the ADP pixel, maybe it will copy the redundant sensor!"], ["user_id", 8], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:44.635722"], ["updated_at", "2019-07-20 06:22:44.635722"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.5ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mRestaurant Update (0.6ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 4], ["updated_at", "2019-07-20 06:22:44.743847"], ["id", 3]]
  [1m[35m (40.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "lowest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 06:22:44.791714"], ["lowest_rating", 4], ["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Update (1.1ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "highest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 06:22:44.797730"], ["highest_rating", 4], ["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "franrowe@friesen.name"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "franrowe@friesen.name"], ["encrypted_password", "$2a$11$ws5ZMHDiNEHBobq5UXOovu8HrYTTruGtBBPze6jL5vWMBsqiM0anu"], ["confirmed_at", "2019-07-20 06:22:44.959517"], ["email", "franrowe@friesen.name"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:44.959444"], ["updated_at", "2019-07-20 06:22:44.959444"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 3], ["user_comment", "Try to generate the SMS hard drive, maybe it will index the online circuit!"], ["user_id", 9], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:44.967923"], ["updated_at", "2019-07-20 06:22:44.967923"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 3], ["updated_at", "2019-07-20 06:22:44.975285"], ["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "lowest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 06:22:44.980158"], ["lowest_rating", 3], ["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "peterfeest@heathcote.co"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "peterfeest@heathcote.co"], ["encrypted_password", "$2a$11$57IZ/fCqA8C7kWKjjO3AZO1RfZgmtpVvMYWfogVH3bp0Dpaw8TZZm"], ["confirmed_at", "2019-07-20 06:22:45.143017"], ["email", "peterfeest@heathcote.co"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:45.142952"], ["updated_at", "2019-07-20 06:22:45.142952"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 1], ["user_comment", "Indexing the monitor won't do anything, we need to reboot the open-source ftp transmitter!"], ["user_id", 10], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:45.151318"], ["updated_at", "2019-07-20 06:22:45.151318"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mRestaurant Update (0.7ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 2], ["updated_at", "2019-07-20 06:22:45.158230"], ["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "lowest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 06:22:45.163345"], ["lowest_rating", 1], ["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "tomeka@welchmclaughlin.info"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "tomeka@welchmclaughlin.info"], ["encrypted_password", "$2a$11$dVP45dwl3HaOVzb.jFotEuvrewOfM3QmZUzJhvWMdKPXQcGSyRx7m"], ["confirmed_at", "2019-07-20 06:22:45.323718"], ["email", "tomeka@welchmclaughlin.info"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:45.323654"], ["updated_at", "2019-07-20 06:22:45.323654"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 5], ["user_comment", "Try to hack the GB transmitter, maybe it will input the open-source protocol!"], ["user_id", 11], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:45.331679"], ["updated_at", "2019-07-20 06:22:45.331679"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 3], ["updated_at", "2019-07-20 06:22:45.338463"], ["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "highest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 06:22:45.346706"], ["highest_rating", 5], ["id", 3]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "vincentwiza@smitham.org"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "vincentwiza@smitham.org"], ["encrypted_password", "$2a$11$t1y7XpbgXD6DFRpPR74MCO8pzaUk9exhzN/6Z5vPRWEcyr7Q9LMci"], ["confirmed_at", "2019-07-20 06:22:45.502475"], ["email", "vincentwiza@smitham.org"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:45.502409"], ["updated_at", "2019-07-20 06:22:45.502409"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 5], ["user_comment", "Indexing the card won't do anything, we need to override the back-end gb monitor!"], ["user_id", 12], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:45.510448"], ["updated_at", "2019-07-20 06:22:45.510448"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.5ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "yonstroman@gutmann.net"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "yonstroman@gutmann.net"], ["encrypted_password", "$2a$11$8FMW..6F7UNBpsHdHYlz4ec/5ZtGBvS0v6GvqiuquHvNetu8eOvi6"], ["confirmed_at", "2019-07-20 06:22:45.678595"], ["email", "yonstroman@gutmann.net"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:45.678533"], ["updated_at", "2019-07-20 06:22:45.678533"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 4], ["user_comment", "You can't calculate the circuit without copying the cross-platform XML feed!"], ["user_id", 13], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:45.686390"], ["updated_at", "2019-07-20 06:22:45.686390"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists (0.6ms)[0m  [1m[34mSELECT  1 AS one FROM "users" WHERE "users"."email" = $1 AND "users"."provider" = $2 LIMIT $3[0m  [["email", "jacinto@botsford.com"], ["provider", "email"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("uid", "encrypted_password", "confirmed_at", "email", "tokens", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["uid", "jacinto@botsford.com"], ["encrypted_password", "$2a$11$17p8G4lCq23DFb4XGNhtLe0flrWK27WVs.zVgkGf/mO4bFMnFBEma"], ["confirmed_at", "2019-07-20 06:22:45.863208"], ["email", "jacinto@botsford.com"], ["tokens", "{}"], ["created_at", "2019-07-20 06:22:45.863112"], ["updated_at", "2019-07-20 06:22:45.863112"]]
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mReview Create (1.2ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 5], ["user_comment", "Try to parse the SQL system, maybe it will hack the auxiliary array!"], ["user_id", 14], ["restaurant_id", 3], ["created_at", "2019-07-20 06:22:45.877289"], ["updated_at", "2019-07-20 06:22:45.877289"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-19 23:33:43 -0700
  [1m[35m (43.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"expiry\":1564814024}}"], ["updated_at", "2019-07-20 06:33:44.728567"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (40.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2019-07-20 06:33:44.777585"], ["last_sign_in_at", "2019-07-20 05:45:04.771978"], ["sign_in_count", 4], ["updated_at", "2019-07-20 06:33:44.779153"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.8ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (3.2ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"}}"], ["updated_at", "2019-07-20 06:33:45.129069"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 1064ms (Views: 0.4ms | ActiveRecord: 98.3ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 23:33:45 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (1.8ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 56ms (Views: 28.6ms | ActiveRecord: 7.8ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-19 23:33:49 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mSQL (47.5ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 150ms (Views: 2.5ms | ActiveRecord: 54.3ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 23:33:54 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (3.2ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 16ms (Views: 12.4ms | ActiveRecord: 3.2ms)


Started GET "/restaurants/2" for 127.0.0.1 at 2019-07-19 23:33:55 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[35mSQL (1.9ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (2.6ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 2], ["id", 2]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 20ms (Views: 1.1ms | ActiveRecord: 4.4ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 23:33:58 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (1.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 12ms (Views: 9.1ms | ActiveRecord: 1.0ms)


Started GET "/restaurants/3" for 127.0.0.1 at 2019-07-19 23:33:59 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mSQL (1.8ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (1.0ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 3], ["id", 3]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 76ms (Views: 9.3ms | ActiveRecord: 2.7ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-19 23:34:34 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 0.7ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:02:30 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (5.5ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 28ms (Views: 13.4ms | ActiveRecord: 5.5ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-20 00:02:33 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (9.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (1.3ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$/k/zv/wjvH.j.Zna963S5ueehAK2GFAjOPKFR9iufjebADIne.Vle\",\"expiry\":1564815754}}"], ["updated_at", "2019-07-20 07:02:34.645742"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2019-07-20 07:02:34.657568"], ["last_sign_in_at", "2019-07-20 06:33:44.777585"], ["sign_in_count", 5], ["updated_at", "2019-07-20 07:02:34.660794"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (1.0ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"expiry\":1564815754,\"last_token\":\"$2a$12$/k/zv/wjvH.j.Zna963S5ueehAK2GFAjOPKFR9iufjebADIne.Vle\",\"updated_at\":\"2019-07-20T07:02:34.682Z\"}}"], ["updated_at", "2019-07-20 07:02:35.175152"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 1369ms (Views: 0.5ms | ActiveRecord: 19.8ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:02:35 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 6ms (Views: 4.5ms | ActiveRecord: 0.6ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:02:36 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mSQL (2.2ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (2.2ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 18ms (Views: 1.3ms | ActiveRecord: 4.4ms)


Started POST "/reviews" for 127.0.0.1 at 2019-07-20 00:02:41 -0700
Processing by ReviewsController#create as HTML
  Parameters: {"review"=>{"rating"=>"3", "user_comment"=>"hello", "restaurant_id"=>1}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "mark@mark.com"], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mReview Create (0.8ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 3], ["user_comment", "hello"], ["user_id", 1], ["restaurant_id", 1], ["created_at", "2019-07-20 07:02:41.871779"], ["updated_at", "2019-07-20 07:02:41.871779"]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (115.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:7
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/models/review.rb:7
  [1m[36mRestaurant Update (1.0ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 3], ["updated_at", "2019-07-20 07:02:42.000916"], ["id", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:7
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:8
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:8
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "lowest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 07:02:42.008359"], ["lowest_rating", 3], ["id", 1]]
  â†³ app/models/review.rb:8
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:8
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:9
  [1m[36mRestaurant Update (0.6ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "highest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 07:02:42.014687"], ["highest_rating", 3], ["id", 1]]
  â†³ app/models/review.rb:9
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:9
No template found for ReviewsController#create, rendering head :no_content
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.7ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"}}"], ["updated_at", "2019-07-20 07:02:42.406086"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 204 No Content in 944ms (ActiveRecord: 126.9ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:02:42 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (0.8ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 1.6ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:03:24 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (2.0ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 2.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:03:33 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (4.1ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 12ms (Views: 5.2ms | ActiveRecord: 4.1ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-20 00:03:35 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$QgR.uww/dpsm.XfrBaWA0.fEw0aKSj877aR2wEpIx5eLO0wGn8l1m\",\"expiry\":1564815816}}"], ["updated_at", "2019-07-20 07:03:36.550200"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2019-07-20 07:03:36.558296"], ["last_sign_in_at", "2019-07-20 07:02:34.657568"], ["sign_in_count", 6], ["updated_at", "2019-07-20 07:03:36.560164"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.8ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"expiry\":1564815816,\"last_token\":\"$2a$12$QgR.uww/dpsm.XfrBaWA0.fEw0aKSj877aR2wEpIx5eLO0wGn8l1m\",\"updated_at\":\"2019-07-20T07:03:36.573Z\"}}"], ["updated_at", "2019-07-20 07:03:37.002485"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 1227ms (Views: 0.6ms | ActiveRecord: 12.8ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:03:37 -0700
Processing by RestaurantsController#index as HTML
  [1m[36mRestaurant Load (0.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 5ms (Views: 3.3ms | ActiveRecord: 0.6ms)


Started GET "/restaurants/3" for 127.0.0.1 at 2019-07-20 00:03:38 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mSQL (2.5ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (2.6ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 3], ["id", 3]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 22ms (Views: 4.8ms | ActiveRecord: 5.1ms)


Started POST "/reviews" for 127.0.0.1 at 2019-07-20 00:03:45 -0700
Processing by ReviewsController#create as HTML
  Parameters: {"review"=>{"rating"=>"4", "user_comment"=>"hello", "restaurant_id"=>3}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "mark@mark.com"], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:3
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mRestaurant Load (1.3ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 4], ["user_comment", "hello"], ["user_id", 1], ["restaurant_id", 3], ["created_at", "2019-07-20 07:03:46.228705"], ["updated_at", "2019-07-20 07:03:46.228705"]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/models/review.rb:7
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:7
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:7
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/models/review.rb:8
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:8
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:8
  [1m[35m (3.1ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 3]]
  â†³ app/models/review.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:9
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:9
No template found for ReviewsController#create, rendering head :no_content
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.8ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"}}"], ["updated_at", "2019-07-20 07:03:46.627222"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 204 No Content in 739ms (ActiveRecord: 19.9ms)


Started GET "/restaurants/3" for 127.0.0.1 at 2019-07-20 00:03:46 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 3], ["id", 3]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 10ms (Views: 2.7ms | ActiveRecord: 1.6ms)


Started GET "/restaurants/3" for 127.0.0.1 at 2019-07-20 00:04:30 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[35mSQL (1.5ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (1.3ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 3], ["id", 3]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 21ms (Views: 5.3ms | ActiveRecord: 2.8ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-20 00:04:57 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"},\"YCO45-h7K2ZIwPDWEOob1Q\":{\"token\":\"$2a$12$DHaeJgVOfD9Z/O3ny2Osc.iVqgrt65.xFlqybACBi1eG2df6n4zPG\",\"expiry\":1564815898}}"], ["updated_at", "2019-07-20 07:04:58.479213"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.8ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2019-07-20 07:04:58.488311"], ["last_sign_in_at", "2019-07-20 07:03:36.558296"], ["sign_in_count", 7], ["updated_at", "2019-07-20 07:04:58.490514"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.8ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (3.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"},\"YCO45-h7K2ZIwPDWEOob1Q\":{\"token\":\"$2a$12$.ooZ1m4aIO9gIiL1ZPj5g.1V9AkdtHzyIYYr9jSIVtdqOcsU/d/yu\",\"expiry\":1564815898,\"last_token\":\"$2a$12$DHaeJgVOfD9Z/O3ny2Osc.iVqgrt65.xFlqybACBi1eG2df6n4zPG\",\"updated_at\":\"2019-07-20T07:04:58.504Z\"}}"], ["updated_at", "2019-07-20 07:04:58.965873"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 1218ms (Views: 0.4ms | ActiveRecord: 12.0ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:04:59 -0700
Processing by RestaurantsController#index as HTML
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (1.6ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 7ms (Views: 4.1ms | ActiveRecord: 1.6ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:05:01 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1", "restaurant"=>{}}
  [1m[35mSQL (0.7ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (1.7ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 12ms (Views: 2.2ms | ActiveRecord: 2.4ms)


Started POST "/reviews" for 127.0.0.1 at 2019-07-20 00:05:06 -0700
Processing by ReviewsController#create as HTML
  Parameters: {"review"=>{"rating"=>"1", "user_comment"=>"goodbye", "restaurant_id"=>1}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "mark@mark.com"], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:3
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mRestaurant Load (0.4ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mReview Create (0.5ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 1], ["user_comment", "goodbye"], ["user_id", 1], ["restaurant_id", 1], ["created_at", "2019-07-20 07:05:06.795101"], ["updated_at", "2019-07-20 07:05:06.795101"]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (0.5ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:7
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/models/review.rb:7
  [1m[36mRestaurant Update (0.5ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 2], ["updated_at", "2019-07-20 07:05:06.807231"], ["id", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:7
  [1m[35m (0.5ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:8
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:8
  [1m[36mRestaurant Update (0.6ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "lowest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 07:05:06.813599"], ["lowest_rating", 1], ["id", 1]]
  â†³ app/models/review.rb:8
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:8
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:9
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:9
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:9
No template found for ReviewsController#create, rendering head :no_content
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (0.7ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"},\"YCO45-h7K2ZIwPDWEOob1Q\":{\"token\":\"$2a$12$FlKCCszRcluYWfizDtnJleyb8V8qliBVZz8tKBwIOULhXNLDHgkXy\",\"expiry\":1564815906,\"last_token\":\"$2a$12$.ooZ1m4aIO9gIiL1ZPj5g.1V9AkdtHzyIYYr9jSIVtdqOcsU/d/yu\",\"updated_at\":\"2019-07-20T07:05:06.841Z\"}}"], ["updated_at", "2019-07-20 07:05:07.189722"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 204 No Content in 756ms (ActiveRecord: 13.4ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:05:07 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1", "restaurant"=>{}}
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 1.8ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:06:53 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1", "restaurant"=>{}}
  [1m[35mSQL (4.4ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (19.3ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 31ms (Views: 2.0ms | ActiveRecord: 23.7ms)


Started POST "/auth/sign_in.json" for 127.0.0.1 at 2019-07-20 00:07:02 -0700
Processing by DeviseTokenAuth::SessionsController#create as JSON
  Parameters: {"email"=>"mark@mark.com", "password"=>"[FILTERED]", "session"=>{"email"=>"mark@mark.com", "password"=>"[FILTERED]"}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE (email = 'mark@mark.com' AND provider='email') ORDER BY "users"."id" ASC LIMIT $1[0m  [["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Unpermitted parameters: :format, :session
Unpermitted parameters: :format, :session
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (8.6ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"},\"YCO45-h7K2ZIwPDWEOob1Q\":{\"token\":\"$2a$12$FlKCCszRcluYWfizDtnJleyb8V8qliBVZz8tKBwIOULhXNLDHgkXy\",\"expiry\":1564815906,\"last_token\":\"$2a$12$.ooZ1m4aIO9gIiL1ZPj5g.1V9AkdtHzyIYYr9jSIVtdqOcsU/d/yu\",\"updated_at\":\"2019-07-20T07:05:06.841Z\"},\"T7avWL2sFWUIrL6z01GJww\":{\"token\":\"$2a$12$1FkNeyfS3UAEiIDpp9f1yuqLXO4HZuxuTFsd47wOlM/5UyY.XfDNu\",\"expiry\":1564816022}}"], ["updated_at", "2019-07-20 07:07:02.951074"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (5.1ms)[0m  [1m[33mUPDATE "users" SET "current_sign_in_at" = $1, "last_sign_in_at" = $2, "sign_in_count" = $3, "updated_at" = $4 WHERE "users"."id" = $5[0m  [["current_sign_in_at", "2019-07-20 07:07:03.001843"], ["last_sign_in_at", "2019-07-20 07:04:58.488311"], ["sign_in_count", 8], ["updated_at", "2019-07-20 07:07:03.010436"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (1.0ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"},\"YCO45-h7K2ZIwPDWEOob1Q\":{\"token\":\"$2a$12$FlKCCszRcluYWfizDtnJleyb8V8qliBVZz8tKBwIOULhXNLDHgkXy\",\"expiry\":1564815906,\"last_token\":\"$2a$12$.ooZ1m4aIO9gIiL1ZPj5g.1V9AkdtHzyIYYr9jSIVtdqOcsU/d/yu\",\"updated_at\":\"2019-07-20T07:05:06.841Z\"},\"T7avWL2sFWUIrL6z01GJww\":{\"token\":\"$2a$12$dYFs1claXaqrXcQSodRieuS.4cv0W7apXgPHPw2dfyHH/pwA7CABq\",\"expiry\":1564816023,\"last_token\":\"$2a$12$1FkNeyfS3UAEiIDpp9f1yuqLXO4HZuxuTFsd47wOlM/5UyY.XfDNu\",\"updated_at\":\"2019-07-20T07:07:03.046Z\"}}"], ["updated_at", "2019-07-20 07:07:03.485200"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 200 OK in 1188ms (Views: 0.7ms | ActiveRecord: 27.4ms)


Started GET "/restaurants" for 127.0.0.1 at 2019-07-20 00:07:04 -0700
Processing by RestaurantsController#index as HTML
  Parameters: {"restaurant"=>{}}
  [1m[36mRestaurant Load (0.7ms)[0m  [1m[34mSELECT "restaurants".* FROM "restaurants" ORDER BY "restaurants"."average_rating" DESC[0m
  â†³ app/controllers/restaurants_controller.rb:3
Completed 200 OK in 95ms (Views: 93.1ms | ActiveRecord: 0.7ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:07:34 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1", "restaurant"=>{}}
  [1m[35mSQL (1.6ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (2.1ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 16ms (Views: 1.4ms | ActiveRecord: 3.7ms)


Started POST "/reviews" for 127.0.0.1 at 2019-07-20 00:07:40 -0700
Processing by ReviewsController#create as HTML
  Parameters: {"review"=>{"rating"=>"5", "user_comment"=>"right now", "restaurant_id"=>1}}
HTTP Origin header (http://localhost:3000) didn't match request.base_url (http://localhost:3001)
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."uid" = $1 LIMIT $2[0m  [["uid", "mark@mark.com"], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:3
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mRestaurant Load (0.7ms)[0m  [1m[34mSELECT  "restaurants".* FROM "restaurants" WHERE "restaurants"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[36mReview Create (3.1ms)[0m  [1m[32mINSERT INTO "reviews" ("rating", "user_comment", "user_id", "restaurant_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["rating", 5], ["user_comment", "right now"], ["user_id", 1], ["restaurant_id", 1], ["created_at", "2019-07-20 07:07:40.470059"], ["updated_at", "2019-07-20 07:07:40.470059"]]
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/controllers/reviews_controller.rb:4
  [1m[35m (0.6ms)[0m  [1m[34mSELECT AVG("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:7
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  â†³ app/models/review.rb:7
  [1m[36mRestaurant Update (0.6ms)[0m  [1m[33mUPDATE "restaurants" SET "average_rating" = $1, "updated_at" = $2 WHERE "restaurants"."id" = $3[0m  [["average_rating", 3], ["updated_at", "2019-07-20 07:07:40.487339"], ["id", 1]]
  â†³ app/models/review.rb:7
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:7
  [1m[35m (0.6ms)[0m  [1m[34mSELECT MIN("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:8
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:8
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:8
  [1m[35m (2.1ms)[0m  [1m[34mSELECT MAX("reviews"."rating") FROM "reviews" WHERE "reviews"."restaurant_id" = $1[0m  [["restaurant_id", 1]]
  â†³ app/models/review.rb:9
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  â†³ app/models/review.rb:9
  [1m[36mRestaurant Update (2.2ms)[0m  [1m[33mUPDATE "restaurants" SET "updated_at" = $1, "highest_rating" = $2 WHERE "restaurants"."id" = $3[0m  [["updated_at", "2019-07-20 07:07:40.506071"], ["highest_rating", 5], ["id", 1]]
  â†³ app/models/review.rb:9
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ app/models/review.rb:9
No template found for ReviewsController#create, rendering head :no_content
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Load (1.9ms)[0m  [1m[37mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2 FOR UPDATE[0m  [["id", 1], ["LIMIT", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[36mUser Update (2.4ms)[0m  [1m[33mUPDATE "users" SET "tokens" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["tokens", "{\"qpPjjjZiK_X581t0opAkZw\":{\"token\":\"$2a$12$WbF0op3334/h6K3WPCYKX.zMP046r7tpqpeqVQGwmPcbvbfVqWAZi\",\"expiry\":1564781204,\"last_token\":\"$2a$12$Z/.HGWhaLSNVNQ/VddCgY.FgYahfl3Qo4YMzymbT34JTxL6Ykxj/u\",\"updated_at\":\"2019-07-19T21:26:44.128Z\"},\"SaqIxjx-oHUs80BqV8kzZQ\":{\"token\":\"$2a$12$cMkMDELEcJxaG5qYxyRqyOcq8PnqzfP4qZoZ7qHirAxNfvaDuJ0.G\",\"expiry\":1564781204,\"last_token\":\"$2a$12$SITKTeHHcTmmHH4AGjyhQewAQJ938sGE84gzbwPBxD5dC74pKNCrS\",\"updated_at\":\"2019-07-19T21:26:44.965Z\"},\"thPoFqLfeYYCSpa7L9Zm9A\":{\"token\":\"$2a$12$Br1it7bheAenEsKZhOSrYeFtCOygBq6aJogMGA7FpeBoy2qtlegby\",\"expiry\":1564781403,\"last_token\":\"$2a$12$fFUI44uhDpBIBqzju6yMw.yEMP5vfT4a8sWvjMFsfRKT4rKO7B1JO\",\"updated_at\":\"2019-07-19T21:30:03.195Z\"},\"YS3ZPLhS97UeGEvLGjbcgA\":{\"token\":\"$2a$12$WQ7whAoTC/GmZjdu3IMl6O5BazOJ2Lb7gu7h1z7nObevfQijfp7pS\",\"expiry\":1564811104,\"last_token\":\"$2a$12$GBDOEux8G6Fwr9ZPLmdUxOv0lqMoJmWwsB.pb/iGwn1xNN/PkxyaC\",\"updated_at\":\"2019-07-20T05:45:04.804Z\"},\"YMwL4jDddcPLg5rmAPMnUw\":{\"token\":\"$2a$12$BmN1oGWS/8I2LLU6ljcCBOcXOt5ANs2GgYziBZJQlx0cZtNcujrza\",\"expiry\":1564814024,\"last_token\":\"$2a$12$RiCSWyL9f408A792eeMN0.AH65jU/NVr2eqXxItRO890D1FZL3Jiu\",\"updated_at\":\"2019-07-20T06:33:44.791Z\"},\"rOpNOmP7WBYG6rfFH1iQHg\":{\"token\":\"$2a$12$BehRo9f70QMnLspFgGp2MuUa5uXaPCW7y2d15PtgfrZP2dfsOe1JC\",\"expiry\":1564815762,\"last_token\":\"$2a$12$FcmkOgVbyzb8CVvkHD8khe7yORTgwSIRyAL6ZqifzRZVH/HcjgKlO\",\"updated_at\":\"2019-07-20T07:02:42.036Z\"},\"VOcT_c2kVfSutBEVzGRRYA\":{\"token\":\"$2a$12$eZ6MO7PUBNnxAi1Vve5qyeZlIWZ6Jl2j7fz3EvHPBtROrzxlDcbsm\",\"expiry\":1564815826,\"last_token\":\"$2a$12$8nmjK1S5T1IdOzsE/W6D/eYGhEb0BL4eCSmt5Z3XfkL0Y1bIYxxGu\",\"updated_at\":\"2019-07-20T07:03:46.284Z\"},\"YCO45-h7K2ZIwPDWEOob1Q\":{\"token\":\"$2a$12$FlKCCszRcluYWfizDtnJleyb8V8qliBVZz8tKBwIOULhXNLDHgkXy\",\"expiry\":1564815906,\"last_token\":\"$2a$12$.ooZ1m4aIO9gIiL1ZPj5g.1V9AkdtHzyIYYr9jSIVtdqOcsU/d/yu\",\"updated_at\":\"2019-07-20T07:05:06.841Z\"},\"T7avWL2sFWUIrL6z01GJww\":{\"token\":\"$2a$12$mpkoxZGVRgvEkDedMMXsi./guUgKL9sKZFa1uPl70jBMGcfsqhU7u\",\"expiry\":1564816060,\"last_token\":\"$2a$12$dYFs1claXaqrXcQSodRieuS.4cv0W7apXgPHPw2dfyHH/pwA7CABq\",\"updated_at\":\"2019-07-20T07:07:40.545Z\"}}"], ["updated_at", "2019-07-20 07:07:41.003235"], ["id", 1]]
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  â†³ /Users/markdonahue/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-5.2.3/lib/active_record/log_subscriber.rb:98
Completed 204 No Content in 954ms (ActiveRecord: 25.3ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:07:41 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1", "restaurant"=>{}}
  [1m[35mSQL (0.9ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (4.0ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 27ms (Views: 3.4ms | ActiveRecord: 4.9ms)


Started GET "/restaurants/1" for 127.0.0.1 at 2019-07-20 00:42:05 -0700
Processing by RestaurantsController#show as HTML
  Parameters: {"id"=>"1", "restaurant"=>{}}
  [1m[35mSQL (9.2ms)[0m  [1m[34mSELECT  DISTINCT reviews.created_at AS alias_0, "restaurants"."id" FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 ORDER BY reviews.created_at desc LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
  [1m[35mSQL (3.6ms)[0m  [1m[34mSELECT "restaurants"."id" AS t0_r0, "restaurants"."name" AS t0_r1, "restaurants"."address" AS t0_r2, "restaurants"."description" AS t0_r3, "restaurants"."user_id" AS t0_r4, "restaurants"."created_at" AS t0_r5, "restaurants"."updated_at" AS t0_r6, "restaurants"."average_rating" AS t0_r7, "restaurants"."highest_rating" AS t0_r8, "restaurants"."lowest_rating" AS t0_r9, "reviews"."id" AS t1_r0, "reviews"."rating" AS t1_r1, "reviews"."user_comment" AS t1_r2, "reviews"."owner_reply" AS t1_r3, "reviews"."user_id" AS t1_r4, "reviews"."restaurant_id" AS t1_r5, "reviews"."created_at" AS t1_r6, "reviews"."updated_at" AS t1_r7 FROM "restaurants" LEFT OUTER JOIN "reviews" ON "reviews"."restaurant_id" = "restaurants"."id" WHERE "restaurants"."id" = $1 AND "restaurants"."id" = $2 ORDER BY reviews.created_at desc[0m  [["id", 1], ["id", 1]]
  â†³ app/controllers/restaurants_controller.rb:12
Completed 200 OK in 30ms (Views: 3.7ms | ActiveRecord: 12.9ms)


